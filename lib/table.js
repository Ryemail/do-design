!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios"),require("vue")):"function"==typeof define&&define.amd?define(["axios","vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).table=t(e.axios,e.vue)}(this,(function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e);function o(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(e,t,r){var n=f;return function(o,a){if(n===d)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=L(i,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=s(e,t,r);if("normal"===c.type){if(n=r.done?h:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",y={};function v(){}function g(){}function m(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(N([])));x&&x!==r&&n.call(x,a)&&(b=x);var k=m.prototype=v.prototype=Object.create(b);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,l){var c=s(e[o],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function L(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=s(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function N(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=k.constructor=m,m.constructor=g,g.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},O(j.prototype),j.prototype[i]=function(){return this},e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(k),c(k,l,"Generator"),k[a]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(c);var u=c.exports;function s(e){return function(t){return r=e,Object.prototype.toString.call(r).replace(/\[|\]/g,"").split(" ")[1].toLowerCase()===t.toLowerCase();var r}}function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return r;for(var n=e.split("."),o=0;o<n.length;o++){var a=n[o],i=s(t=t[a]);if(i("array")&&!t.length)return r;if(i("object")&&!Object.keys(t).length)return r;if(!t)return r}return t}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"DoTable",props:{type:{type:String,default:"table"},data:{type:Array,default:function(){return[]}},col:{type:Number,default:6},columns:{type:Array,default:function(){return[]}},url:{type:String,default:""},query:{type:Object,default:function(){return null}},page:{type:Number,default:1},limit:{type:Number,default:10},total:{type:Number,default:0},keys:{type:Object,default:function(){return{data:"data",total:"total",code:"code"}}},cellEmpty:{type:String,default:"-"},headerRowClassName:{type:String,default:"do-table-header"},border:{type:Boolean,default:!0},axiosConfig:{type:Object,default:function(){return{}}}},components:{cellRender:{functional:!0,props:{index:Number,row:Object,render:Function},render:function(e,t){var r=t.props,n=r.index,o=r.row,a=r.render;return a(e,{index:n,row:o})}}},data:function(){return{tableQuery:{page:this.page,limit:this.limit},tableArray:[],tableTotal:this.total,loading:!1,columnType:["selection","index","expand"],responseData:null}},watch:{query:{handler:function(e){this.tableQuery=d(d({},e),this.tableQuery)},deep:!0,immediate:!0},tableQuery:{handler:function(){this.url&&this.fetchTable()},deep:!0,immediate:!0}},computed:{isTableType:function(e){return"table"===e.type},tableData:function(e){var t=e.data,r=e.tableArray,n=e.page,o=e.limit,a=o*(n-1);return e.url?[].concat(i(t),i(r)):t.slice(a,a+o)},numbers:function(e){for(var t=e.tableData,r=e.col,n=Math.ceil(t.length/r),o=[],a=0,i=0;i<n;i++)a+=i?r:0,o.push([a,a+r]);return o}},methods:{levelData:f,fetchTable:function(){var e,t=this;return(e=u.mark((function e(){var r,o,a,i,l,c,s,p,h,y,v;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,r=t.url,o=t.axiosConfig,a=d({url:r},o),o.methods?a.data=t.tableQuery:a.params=t.tableQuery,e.next=7,n.default(a);case 7:i=e.sent,l=t.keys,c=l.code,s=void 0===c?"code":c,p=l.data,h=void 0===p?"data":p,y=l.total,v=void 0===y?"total":y,t.responseData=i,200===f(s,i,0)&&(t.tableArray=f(h,i,[]),t.tableTotal=f(v,i,0)),t.loading=!1,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0,t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[1,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function l(e){o(i,n,a,l,c,"next",e)}function c(e){o(i,n,a,l,c,"throw",e)}l(void 0)}))})()},reload:function(e){this.tableQuery.page=e},structure:function(e,t){return this.tableData.slice(e,t)}}},y={class:"do-table"},v={"slot-scope":"{ $index, row }"},g={key:1,class:"do-grid-table-wrapper"},m={class:"do-grid-table"},b={class:"do-pagination"},w={class:"do-total"};return h.render=function(e,r,n,o,a,i){var l=t.resolveComponent("cell-render"),c=t.resolveComponent("el-table-column"),u=t.resolveComponent("el-table"),s=t.resolveComponent("el-pagination"),f=t.resolveDirective("loading");return t.openBlock(),t.createBlock("div",y,["table"===n.type?t.withDirectives((t.openBlock(),t.createBlock(u,t.mergeProps({key:0,data:i.tableData,style:{width:"100%"},"header-row-class-name":n.headerRowClassName,border:n.border},t.toHandlers(e.$listeners),e.$attrs),{default:t.withCtx((function(){return[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(n.columns,(function(r,o){return t.openBlock(),t.createBlock(t.Fragment,null,[a.columnType.includes(r.type)?(t.openBlock(),t.createBlock(c,{key:o,type:r.type,fixed:r.fixed,width:r.width},null,8,["type","fixed","width"])):(t.openBlock(),t.createBlock(c,{key:o,type:r.type,fixed:r.fixed,align:r.align,prop:r.prop,label:r.label,"min-width":r.minWidth,width:r.width},{default:t.withCtx((function(){return[t.createVNode("template",v,["slot"===r.type?t.renderSlot(e.$slots,r.prop,{key:0,index:e.$index,row:e.row}):(t.openBlock(),t.createBlock(t.Fragment,{key:1},[r.html?(t.openBlock(),t.createBlock("div",{key:0,innerHTML:i.levelData(r.prop,e.row,n.cellEmpty)},null,8,["innerHTML"])):r.render?(t.openBlock(),t.createBlock(l,{key:1,index:e.$index,row:e.row,render:r.render},null,8,["index","row","render"])):(t.openBlock(),t.createBlock(t.Fragment,{key:2},[t.createTextVNode(t.toDisplayString(i.levelData(r.prop,e.row,n.cellEmpty)),1)],64))],64))])]})),_:2},1032,["type","fixed","align","prop","label","min-width","width"]))],64)})),256))]})),_:1},16,["data","header-row-class-name","border"])),[[f,a.loading]]):"grid"===n.type?(t.openBlock(),t.createBlock("div",g,[t.createVNode("table",m,[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(i.numbers,(function(r,n){return t.openBlock(),t.createBlock("tr",{key:n},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(i.structure(r[0],r[1]),(function(r,o){return t.openBlock(),t.createBlock("td",{class:"do-grid-td",key:o},[t.renderSlot(e.$slots,"default",{data:r,row:n,col:o})])})),128))])})),128))])])):t.createCommentVNode("",!0),t.createVNode("div",b,[t.createVNode("div",w,[t.renderSlot(e.$slots,"total",{data:a.responseData})]),t.createVNode(s,{"hide-on-single-page":"",onSizeChange:i.reload,onCurrentChange:i.reload,"current-page":a.tableQuery.page,total:a.tableTotal||i.tableData.length,layout:"total, prev, pager, next, jumper"},null,8,["onSizeChange","onCurrentChange","current-page","total"])])])},h.install=function(e){e.component(h.name,h)},h}));
