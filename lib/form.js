!function(){"use strict";var e={d:function(t,a){for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return i}});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataForm?a("el-form",e._b({ref:"eform",class:["d-form"],attrs:{model:e.dataForm,rules:e.rules,size:e.size,inline:e.inline,"show-message":e.showMessage,"label-width":e.labelWidth+"px"}},"el-form",e.$attrs,!1),[a("div",{class:["flex-1"]},e._l(e.dataColumns,(function(t,r){return a("el-form-item",{key:r,attrs:{label:t.label,prop:t.prop,"show-message":!!t.showMessage}},["input"===t.type?a("el-input",{attrs:{placeholder:t.placeholder,"show-word-limit":t.showWordLimit,minlength:t.minlength,clearable:t.clearable,maxlength:t.maxlength,disabled:t.disabled,readonly:t.readonly},on:{input:function(a){return e.onInput(t)}},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}},[t.prepend?a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._t(t.prepend,null,{data:t})],2):e._e(),e._v(" "),t.append?a("span",{attrs:{slot:"append"},slot:"append"},[e._t(t.append,null,{data:t})],2):e._e(),e._v(" "),t.prefix?a("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._t(t.prefix,null,{data:t})],2):e._e(),e._v(" "),t.suffix?a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._t(t.suffix,null,{data:t})],2):e._e()]):e._e(),e._v(" "),"textarea"===t.type?a("el-input",{attrs:{type:"textarea","show-word-limit":t.showWordLimit,minlength:t.minlength,maxlength:t.maxlength,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"switch"===t.type?a("el-switch",{attrs:{disabled:t.disabled,width:t.width,"active-value":t.active,"inactive-value":t.inactive,"active-color":t.activeColor,"inactive-color":t.inactiveColor},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"select"===t.type?a("el-select",{attrs:{placeholder:t.placeholder,disabled:t.disabled},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}},e._l(t.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1):e._e(),e._v(" "),"checkbox"===t.type?a("el-checkbox-group",{attrs:{disabled:t.disabled},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}},e._l(t.options,(function(r,o){return a("el-checkbox",{key:o,attrs:{label:r.value,name:t.prop}},[e._v("\n\t\t\t\t\t"+e._s(r.label)+"\n\t\t\t\t")])})),1):e._e(),e._v(" "),"radio"===t.type?a("el-radio-group",{attrs:{disabled:t.disabled},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}},e._l(t.options,(function(t,r){return a("el-radio",{key:r,attrs:{label:t.value}},[e._v("\n\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t")])})),1):e._e(),e._v(" "),"date"===t.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:t.placeholder,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"daterange"===t.type?a("el-date-picker",{attrs:{type:"daterange","range-separator":t.separator||"-",format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions,"start-placeholder":t.placeholder&&t.placeholder[0],"end-placeholder":t.placeholder&&t.placeholder[1]},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"datetime"===t.type?a("el-date-picker",{attrs:{type:"datetime",placeholder:t.placeholder,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"datetimerange"===t.type?a("el-date-picker",{attrs:{type:"datetimerange","range-separator":t.separator,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions,"start-placeholder":t.placeholder&&t.placeholder[0],"end-placeholder":t.placeholder&&t.placeholder[1]},model:{value:e.dataForm[t.prop],callback:function(a){e.$set(e.dataForm,t.prop,a)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"slot"===t.type?e._t(t.slot,null,{item:t,data:e.dataForm,index:r}):e._e()],2)})),1),e._v(" "),e.buttons.length?a("div",{class:{"d-form-footer":!0,"d-form-footer--top":!e.inline},style:{textAlign:e.buttonAlign}},e._l(e.buttons,(function(t,r){return a("el-button",{key:r,attrs:{type:t.type},on:{click:function(a){return e.onEvent(t)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.onEvent(t)}}},[e._v("\n\t\t\t"+e._s(t.label)+"\n\t\t")])})),1):e._e()]):e._e()};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var a=Object.keys(e),n=Object.keys(t);if(n.length!==a.length)return!1;for(var l=0;l<a.length;l++){var i=a[l];if("object"===r(e[i]))return o(e[i],t[i]);if(!n.includes(i))return!1;if(t[i]!==e[i])return!1}return!0}a._withStripped=!0;var n=function(e,t,a,r,o,n,l,i){var p,s="function"==typeof e?e.options:e;if(t&&(s.render=t,s.staticRenderFns=[],s._compiled=!0),p)if(s.functional){s._injectStyles=p;var d=s.render;s.render=function(e,t){return p.call(t),d(e,t)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,p):[p]}return{exports:e,options:s}}({name:"DForm",props:{form:{type:Object,default:function(){return{}}},columns:{type:Array,default:function(){return[]}},rules:{type:Object,default:function(){return{}}},size:{type:String,default:""},labelWidth:{type:Number,default:140},showMessage:{type:Boolean,default:!0},inline:{type:Boolean,default:!1},button:{type:Array,default:function(){return[]}},buttonAlign:{type:String,default:"center"}},data:function(){return{dataColumns:this.columns,isChange:!1}},computed:{eform:function(){return this.$refs.eform},dataForm:{get:function(){return this.form},set:function(e){this.$emit("update:form",e)}},parent:function(){for(var e=this.$parent;e;){if("dDialog"===e.$options.name)return e;e=e.$parent}return!1},buttons:function(){return null===this.button?[]:this.button.length?this.button:this.inline?[{type:"default",prop:"reset",label:"重置"},{type:"primary",prop:"submit",label:"查询"}]:[{type:"primary",prop:"submit",label:"确定"},{type:"default",prop:"reset",label:"取消"}]},parentVisible:function(){return!!this.parent&&this.parent.$attrs.visible}},watch:{dataForm:{handler:function(e,t){this.isChange=o(e,t||{}),this.onValidate()},deep:!0,immediate:!0},columns:{handler:function(){!this.parent&&this.onLazyLoad()},deep:!0,immediate:!0},parentVisible:{handler:function(e){e&&!this.isChange&&this.onLazyLoad(),this.clearValidate()},immediate:!0}},methods:{onInput:function(e){var t;e.number&&(this.dataForm[e.prop]=(t=this.dataForm[e.prop],"number"===e.number?t.replace(/^(0+)|[^\d]+/g,""):t=(t=(t=(t=(t=t.replace(/[^\d.]/g,"")).replace(/^\./g,"")).replace(/\.{2,}/g,"")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(-)*(\d+)\.(\d{2}).*$/,"$1$2.$3")))},onValidate:function(){var e=this;this.columns.forEach((function(t){t.slot&&e.dataForm[t.prop].length&&e.clearValidate(t.prop)}))},onLazyLoad:function(){var e=this,t=["select","checkbox","radio"];this.dataColumns.map((function(a){return t.includes(a.type)&&a.lazyLoad&&a.lazyLoad((function(e){a.options=e}),e.dataForm),a}))},onEvent:function(e){return"submit"===e.prop?this.validate(e):"reset"===e.prop?(this.$emit("event",e),this.resetFields()):void this.$emit("event",e)},validate:function(e){var t=this,a=!1;return this.eform.validate((function(r){if(a=r,r&&e)return t.$emit("event",e)})),Promise.resolve(a)},resetFields:function(){var e=this;this.$nextTick((function(){e.eform.resetFields()}))},clearValidate:function(e){var t=this;this.$nextTick((function(){t.eform.clearValidate(e)}))}}},a);n.options.__file="packages/form/src/index.vue";var l=n.exports;l.install=function(e){e.component(l.name,l)};var i=l;module.exports=t}();