!function(){"use strict";var e={d:function(t,r){for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return p}});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.dataForm?r("el-form",e._b({ref:"eform",class:["d-form"],attrs:{model:e.dataForm,rules:e.rules,size:e.size,inline:e.inline,"show-message":e.showMessage,"label-width":e.labelWidth+"px"}},"el-form",e.$attrs,!1),[r("div",{class:["flex-1"]},e._l(e.dataColumns,(function(t,a){return r("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop,"show-message":!!t.showMessage}},["input"===t.type?r("el-input",{attrs:{placeholder:t.placeholder,"show-word-limit":t.showWordLimit,minlength:t.minlength,clearable:t.clearable,maxlength:t.maxlength,disabled:t.disabled,readonly:t.readonly},on:{input:function(r){return e.onInput(t)}},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}},[t.prepend?r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._t(t.prepend,null,{data:t})],2):e._e(),e._v(" "),t.append?r("span",{attrs:{slot:"append"},slot:"append"},[e._t(t.append,null,{data:t})],2):e._e(),e._v(" "),t.prefix?r("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._t(t.prefix,null,{data:t})],2):e._e(),e._v(" "),t.suffix?r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._t(t.suffix,null,{data:t})],2):e._e()]):e._e(),e._v(" "),"textarea"===t.type?r("el-input",{attrs:{type:"textarea","show-word-limit":t.showWordLimit,minlength:t.minlength,maxlength:t.maxlength,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"switch"===t.type?r("el-switch",{attrs:{disabled:t.disabled,width:t.width,"active-value":t.active,"inactive-value":t.inactive,"active-color":t.activeColor,"inactive-color":t.inactiveColor},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"select"===t.type?r("el-select",{attrs:{placeholder:t.placeholder,disabled:t.disabled},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}},e._l(t.options,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1):e._e(),e._v(" "),"checkbox"===t.type?r("el-checkbox-group",{attrs:{disabled:t.disabled},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}},e._l(t.options,(function(a,o){return r("el-checkbox",{key:o,attrs:{label:a.value,name:t.prop}},[e._v("\n\t\t\t\t\t"+e._s(a.label)+"\n\t\t\t\t")])})),1):e._e(),e._v(" "),"radio"===t.type?r("el-radio-group",{attrs:{disabled:t.disabled},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}},e._l(t.options,(function(t,a){return r("el-radio",{key:a,attrs:{label:t.value}},[e._v("\n\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t")])})),1):e._e(),e._v(" "),"date"===t.type?r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:t.placeholder,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"daterange"===t.type?r("el-date-picker",{attrs:{type:"daterange","range-separator":t.separator||"-",format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions,"start-placeholder":t.placeholder&&t.placeholder[0],"end-placeholder":t.placeholder&&t.placeholder[1]},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"datetime"===t.type?r("el-date-picker",{attrs:{type:"datetime",placeholder:t.placeholder,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"datetimerange"===t.type?r("el-date-picker",{attrs:{type:"datetimerange","range-separator":t.separator,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions,"start-placeholder":t.placeholder&&t.placeholder[0],"end-placeholder":t.placeholder&&t.placeholder[1]},model:{value:e.dataForm[t.prop],callback:function(r){e.$set(e.dataForm,t.prop,r)},expression:"dataForm[item.prop]"}}):e._e(),e._v(" "),"slot"===t.type?e._t(t.slot,null,{item:t,data:e.dataForm,index:a}):e._e()],2)})),1),e._v(" "),e.buttonArray.length?r("div",{class:{"d-form-footer":!0,"d-form-footer--top":!e.inline},style:{textAlign:e.buttonAlign}},e._l(e.buttonArray,(function(t,a){return r("el-button",{key:a,attrs:{type:t.type},on:{click:function(r){return e.onEvent(t)},keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.onEvent(t)}}},[e._v("\n\t\t\t"+e._s(t.label)+"\n\t\t")])})),1):e._e()]):e._e()};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=function(e){return function(t){return r=e,Object.prototype.toString.call(r).replace(/\[|\]/g,"").split(" ")[1].toLowerCase()===t.toLowerCase();var r}}(e);if(t("array"))return e.map((function(e){return"object"===a(e)?o(e):e}));if(t("object")){var r={};for(var n in e)r[n]="object"===a(e[n])?o(e[n]):e[n];return r}if(t("function"))return new Function("return "+e.toString())();if(t("map")){var l=new Map;return e.keys().forEach((function(t){l.set(t,e.get(t))})),l}return e}function n(e,t){var r=Object.keys(e),o=Object.keys(t);if(o.length!==r.length)return!1;for(var l=0;l<r.length;l++){var i=r[l];if("object"===a(e[i]))return n(e[i],t[i]);if(!o.includes(i))return!1;if(t[i]!==e[i])return!1}return!0}r._withStripped=!0;var l=function(e,t,r,a,o,n,l,i){var p,s="function"==typeof e?e.options:e;if(t&&(s.render=t,s.staticRenderFns=[],s._compiled=!0),p)if(s.functional){s._injectStyles=p;var d=s.render;s.render=function(e,t){return p.call(t),d(e,t)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,p):[p]}return{exports:e,options:s}}({name:"DForm",props:{form:{type:Object,default:function(){return{}}},columns:{type:Array,default:function(){return[]}},rules:{type:Object,default:function(){return{}}},size:{type:String,default:""},labelWidth:{type:Number,default:140},showMessage:{type:Boolean,default:!0},inline:{type:Boolean,default:!1},buttons:{type:[Array,Object],default:function(){return[]}},buttonAlign:{type:String,default:"center"}},data:function(){return{dataColumns:o(this.columns),isChange:!1}},computed:{eform:function(){return this.$refs.eform},dataForm:{get:function(){return this.form},set:function(e){this.$emit("update:form",e)}},parent:function(){for(var e=this.$parent;e;){if("DDialog"===e.$options.name)return e;e=e.$parent}return!1},buttonArray:function(){return null===this.buttons?[]:this.buttons.length?this.buttons:this.inline?[{type:"default",prop:"reset",label:"重置"},{type:"primary",prop:"submit",label:"查询"}]:[{type:"primary",prop:"submit",label:"确定"},{type:"default",prop:"reset",label:"取消"}]},parentVisible:function(){return!!this.parent&&this.parent.$attrs.visible}},watch:{dataForm:{handler:function(e,t){this.isChange=n(e,t||{}),this.onValidate()},deep:!0,immediate:!0},columns:{handler:function(){!this.parent&&this.onLazyLoad()},deep:!0,immediate:!0},parentVisible:{handler:function(e){e&&!this.isChange&&this.onLazyLoad(),this.clearValidate()},immediate:!0}},methods:{onInput:function(e){var t;e.number&&(this.dataForm[e.prop]=(t=this.dataForm[e.prop],"number"===e.number?t.replace(/^(0+)|[^\d]+/g,""):t=(t=(t=(t=(t=t.replace(/[^\d.]/g,"")).replace(/^\./g,"")).replace(/\.{2,}/g,"")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(-)*(\d+)\.(\d{2}).*$/,"$1$2.$3")))},onValidate:function(){var e=this;this.columns.forEach((function(t){t.slot&&e.dataForm[t.prop].length&&e.clearValidate(t.prop)}))},onLazyLoad:function(){var e=this,t=["select","checkbox","radio"];this.dataColumns.forEach((function(r,a){t.includes(r.type)&&r.lazyLoad&&r.lazyLoad((function(t){r.options=t,e.$set(e.dataColumns,a,r)}),e.dataForm)}))},onEvent:function(e){return"submit"===e.prop?this.validate(e):"reset"===e.prop?(this.$emit("event",e),this.resetFields()):void this.$emit("event",e)},validate:function(e){var t=this,r=!1;return this.eform.validate((function(a){if(r=a,a&&e)return t.$emit("event",e)})),Promise.resolve(r)},resetFields:function(){var e=this;this.$nextTick((function(){e.eform.resetFields()}))},clearValidate:function(e){var t=this;this.$nextTick((function(){t.eform.clearValidate(e)}))}}},r);l.options.__file="packages/form/src/index.vue";var i=l.exports;i.install=function(e){e.component(i.name,i)};var p=i;module.exports=t}();