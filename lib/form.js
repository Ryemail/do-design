!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("vue")):"function"==typeof define&&define.amd?define(["vue"],o):(e="undefined"!=typeof globalThis?globalThis:e||self).form=o(e.vue)}(this,(function(e){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,a){var l=Object.keys(e),r=Object.keys(a);if(r.length!==l.length)return!1;for(var n=0;n<l.length;n++){var d=l[n];if("object"===o(e[d]))return t(e[d],a[d]);if(!r.includes(d))return!1;if(a[d]!==e[d])return!1}return!0}var a={name:"DoForm",props:{form:{type:Object,default:null},rules:{type:Object,default:function(){}},size:{type:String,default:"small"},columns:{type:Array,default:function(){return[]}},labelWidth:{type:Number,default:100},button:{type:Array,default:function(){return[{type:"primary",label:"保存",prop:"submit",size:"small"},{type:"default",label:"取消",prop:"reset",size:"small"}]}},buttonAlign:{type:String,default:"center"}},data:function(){return{dataColumns:this.columns,isChange:!1}},computed:{dataForm:{get:function(){return this.form},set:function(e){this.$emit("update:form",e)}},parent:function(){for(var e=this.$parent;e;){if("DoDialog"===e.$options.componentName)return e;e=e.$parent}return!1},parentVisible:function(){return!!this.parent&&this.parent.$attrs.visible}},watch:{dataForm:{handler:function(e,o){this.isChange=t(e,o||{})},deep:!0,immediate:!0},columns:{handler:function(){!this.parent&&this.onLazyLoad()},immediate:!0,deep:!0},parentVisible:{handler:function(e){e&&!this.isChange&&this.onLazyLoad(),e||this.clearValidate()},immediate:!0}},methods:{onInput:function(e){var o;e.number&&(this.dataForm[e.prop]=(o=this.dataForm[e.prop],"number"===e.number?o.replace(/^(0+)|[^\d]+/g,""):o=(o=(o=(o=(o=o.replace(/[^\d.]/g,"")).replace(/^\./g,"")).replace(/\.{2,}/g,"")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(-)*(\d+)\.(\d{2}).*$/,"$1$2.$3")))},onLazyLoad:function(){var e=this,o=["select","checkbox","radio"];this.dataColumns.map((function(t){return o.includes(t.type)&&t.lazyLoad&&t.lazyLoad((function(e){t.options=e}),e.dataForm),t}))},onEvent:function(e){return"submit"===e.prop?this.validate(e):"reset"===e.prop?this.resetFields():void this.$emit("event",e)},validate:function(e){var o=this,t=this.$refs.form,a=!1;return t.validate((function(t){if(a=t,t&&e)return o.$emit("event",e)})),Promise.resolve(a)},resetFields:function(){var e=this;this.$nextTick((function(){e.$refs.form.resetFields()}))},clearValidate:function(e){var o=this;this.$nextTick((function(){o.$refs.form.clearValidate(e)}))}}},l={key:0,slot:"prepend"},r={key:1,slot:"append"},n={key:2,slot:"prefix"},d={key:3,slot:"suffix"};return a.render=function(o,t,a,i,p,c){var u=e.resolveComponent("el-input"),m=e.resolveComponent("el-switch"),s=e.resolveComponent("el-option"),f=e.resolveComponent("el-select"),h=e.resolveComponent("el-checkbox"),y=e.resolveComponent("el-checkbox-group"),k=e.resolveComponent("el-radio"),b=e.resolveComponent("el-radio-group"),v=e.resolveComponent("el-date-picker"),V=e.resolveComponent("el-form-item"),g=e.resolveComponent("el-button"),B=e.resolveComponent("el-form");return c.dataForm?(e.openBlock(),e.createBlock(B,e.mergeProps({key:0,model:c.dataForm,rules:a.rules,size:a.size,ref:"form",class:["do-form"]},o.$attrs,{"label-width":a.labelWidth+"px"}),{default:e.withCtx((function(){return[e.createVNode("div",{class:[o.$attrs.inline&&"flex-1"]},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(p.dataColumns,(function(t,i){return e.openBlock(),e.createBlock(V,{label:t.label,prop:t.prop,key:i},{default:e.withCtx((function(){return["input"===t.type?(e.openBlock(),e.createBlock(u,{key:0,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},placeholder:t.placeholder,"show-word-limit":t.showWordLimit,minlength:t.minlength,clearable:t.clearable,maxlength:t.maxlength,disabled:t.disabled,readonly:t.readonly,onInput:function(e){return c.onInput(t)}},{default:e.withCtx((function(){return[t.prepend?(e.openBlock(),e.createBlock("span",l,[e.renderSlot(o.$slots,t.prepend,{data:t})])):e.createCommentVNode("",!0),t.append?(e.openBlock(),e.createBlock("span",r,[e.renderSlot(o.$slots,t.append,{data:t})])):e.createCommentVNode("",!0),t.prefix?(e.openBlock(),e.createBlock("span",n,[e.renderSlot(o.$slots,t.prefix,{data:t})])):e.createCommentVNode("",!0),t.suffix?(e.openBlock(),e.createBlock("span",d,[e.renderSlot(o.$slots,t.suffix,{data:t})])):e.createCommentVNode("",!0)]})),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","show-word-limit","minlength","clearable","maxlength","disabled","readonly","onInput"])):e.createCommentVNode("",!0),"textarea"===t.type?(e.openBlock(),e.createBlock(u,{key:1,type:"textarea","show-word-limit":t.showWordLimit,minlength:t.minlength,maxlength:t.maxlength,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e}},null,8,["show-word-limit","minlength","maxlength","placeholder","disabled","readonly","modelValue","onUpdate:modelValue"])):e.createCommentVNode("",!0),"switch"===t.type?(e.openBlock(),e.createBlock(m,{key:2,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},disabled:t.disabled,width:t.width,"active-value":t.active,"inactive-value":t.inactive,"active-color":t.activeColor,"inactive-color":t.inactiveColor},null,8,["modelValue","onUpdate:modelValue","disabled","width","active-value","inactive-value","active-color","inactive-color"])):e.createCommentVNode("",!0),"select"===t.type?(e.openBlock(),e.createBlock(f,{key:3,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},placeholder:t.placeholder,disabled:t.disabled},{default:e.withCtx((function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.options,(function(o,t){return e.openBlock(),e.createBlock(s,{key:t,label:o.label,value:o.value},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled"])):e.createCommentVNode("",!0),"checkbox"===t.type?(e.openBlock(),e.createBlock(y,{key:4,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},disabled:t.disabled},{default:e.withCtx((function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.options,(function(o,a){return e.openBlock(),e.createBlock(h,{key:a,label:o.value,name:t.prop},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(o.label),1)]})),_:2},1032,["label","name"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):e.createCommentVNode("",!0),"radio"===t.type?(e.openBlock(),e.createBlock(b,{key:5,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},disabled:t.disabled},{default:e.withCtx((function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.options,(function(o,t){return e.openBlock(),e.createBlock(k,{key:t,label:o.value},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(o.label),1)]})),_:2},1032,["label"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):e.createCommentVNode("",!0),"date"===t.type?(e.openBlock(),e.createBlock(v,{key:6,type:"date",placeholder:t.placeholder,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions,style:{width:"100%"}},null,8,["placeholder","modelValue","onUpdate:modelValue","format","readonly","disabled","value-format","picker-options"])):e.createCommentVNode("",!0),"daterange"===t.type?(e.openBlock(),e.createBlock(v,{key:7,type:"daterange",modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},"range-separator":t.separator,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions,"start-placeholder":t.placeholder&&t.placeholder[0],"end-placeholder":t.placeholder&&t.placeholder[1]},null,8,["modelValue","onUpdate:modelValue","range-separator","format","readonly","disabled","value-format","picker-options","start-placeholder","end-placeholder"])):e.createCommentVNode("",!0),"datetime"===t.type?(e.openBlock(),e.createBlock(v,{key:8,type:"datetime",placeholder:t.placeholder,modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions},null,8,["placeholder","modelValue","onUpdate:modelValue","format","readonly","disabled","value-format","picker-options"])):e.createCommentVNode("",!0),"datetimerange"===t.type?(e.openBlock(),e.createBlock(v,{key:9,type:"datetimerange",modelValue:c.dataForm[t.prop],"onUpdate:modelValue":function(e){return c.dataForm[t.prop]=e},"range-separator":t.separator,format:t.format,readonly:t.readonly,disabled:t.disabled,"value-format":t.valueFormat,"picker-options":t.pickerOptions,"start-placeholder":t.placeholder&&t.placeholder[0],"end-placeholder":t.placeholder&&t.placeholder[1]},null,8,["modelValue","onUpdate:modelValue","range-separator","format","readonly","disabled","value-format","picker-options","start-placeholder","end-placeholder"])):e.createCommentVNode("",!0),"slot"===t.type?e.renderSlot(o.$slots,t.slot,{key:10,item:t,data:a.form,index:i}):e.createCommentVNode("",!0)]})),_:2},1032,["label","prop"])})),128))],2),a.button.length?(e.openBlock(),e.createBlock("div",{key:0,class:"do-form-footer",style:{textAlign:a.buttonAlign}},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(a.button,(function(o,t){return e.openBlock(),e.createBlock(g,{key:t,type:o.type,size:o.size,onClick:function(e){return c.onEvent(o)}},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(o.label),1)]})),_:2},1032,["type","size","onClick"])})),128))],4)):e.createCommentVNode("",!0)]})),_:1},16,["model","rules","size","label-width"])):e.createCommentVNode("",!0)},a.install=function(e){e.component(a.name,a)},a}));
